(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports={
  "bits": [
    {
      "desc": "Maru Mari Taken",
      "category": "upgrade"
    },
    {
      "desc": "Missile Container (Brinstar)",
      "category": "missile_containers"
    },
    {
      "desc": "Red Door (Long Beam)",
      "category": "doors"
    },
    {
      "desc": "Red Door (Tourian Bridge)",
      "category": "doors"
    },
    {
      "desc": "Energy Tank (Brinstar)",
      "category": "energy_tanks"
    },
    {
      "desc": "Red Door (Bombs)",
      "category": "doors"
    },
    {
      "desc": "Bombs Taken",
      "category": "upgrade"
    },
    {
      "desc": "Red Door (Ice Beam Brinstar)",
      "category": "doors"
    },
    {
      "desc": "Missile Container (Brinstar)",
      "category": "missile_containers"
    },
    {
      "desc": "Energy Tank (Brinstar)",
      "category": "energy_tanks"
    },
    {
      "desc": "Red Door (Varia)",
      "category": "doors"
    },
    {
      "desc": "Varia Taken",
      "category": "upgrade"
    },
    {
      "desc": "Energy Tank (Brinstar)",
      "category": "energy_tanks"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Red Door (Ice Beam Norfair)",
      "category": "doors"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Red Door (High Jump Boots)",
      "category": "doors"
    },
    {
      "desc": "High Jump Boots Taken",
      "category": "upgrade"
    },
    {
      "desc": "Red Door (Screw Attack)",
      "category": "doors"
    },
    {
      "desc": "Screw Attack Taken",
      "category": "upgrade"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Red Door (Wave Beam)",
      "category": "doors"
    },
    {
      "desc": "Energy Tank (Norfair)",
      "category": "energy_tanks"
    },
    {
      "desc": "Missile Container (Norfair)",
      "category": "missile_containers"
    },
    {
      "desc": "Red Door (Kraid's Lair)",
      "category": "doors"
    },
    {
      "desc": "Missile Container (Kraid's Lair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Kraid's Lair)",
      "category": "missile_containers"
    },
    {
      "desc": "Red Door (Kraid's Lair)",
      "category": "doors"
    },
    {
      "desc": "Energy Tank (Kraid's Lair)",
      "category": "energy_tanks"
    },
    {
      "desc": "Red Door (Kraid's Lair)",
      "category": "doors"
    },
    {
      "desc": "Red Door (Kraid's Lair)",
      "category": "doors"
    },
    {
      "desc": "Missile Container (Kraid's Lair)",
      "category": "missile_containers"
    },
    {
      "desc": "Missile Container (Kraid's Lair)",
      "category": "missile_containers"
    },
    {
      "desc": "Red Door (Kraid's Room)",
      "category": "doors"
    },
    {
      "desc": "Energy Tank (Kraid's Room)",
      "category": "energy_tanks"
    },
    {
      "desc": "Missile Container (Ridley's Lair)",
      "category": "missile_containers"
    },
    {
      "desc": "Red Door (Ridley's Lair)",
      "category": "doors"
    },
    {
      "desc": "Energy Tank (Ridley's Lair)",
      "category": "energy_tanks"
    },
    {
      "desc": "Missile Container (Ridley's Lair)",
      "category": "missile_containers"
    },
    {
      "desc": "Yellow Door (in Ridley's Room)",
      "category": "doors"
    },
    {
      "desc": "Energy Tank (Room Behind Ridley)",
      "category": "energy_tanks"
    },
    {
      "desc": "Missile Container (Ridley's Lair)",
      "category": "missile_containers"
    },
    {
      "desc": "Yellow Door (Tourian)",
      "category": "doors"
    },
    {
      "desc": "Red Door (Tourian)",
      "category": "doors"
    },
    {
      "desc": "Red Door (Tourian)",
      "category": "doors"
    },
    {
      "desc": "Zebetite 1 Killed",
      "category": "monsters"
    },
    {
      "desc": "Zebetite 2 Killed",
      "category": "monsters"
    },
    {
      "desc": "Zebetite 3 Killed",
      "category": "monsters"
    },
    {
      "desc": "Zebetite 4 Killed",
      "category": "monsters"
    },
    {
      "desc": "Zebetite 5 Killed",
      "category": "monsters"
    },
    {
      "desc": "Mother Brain Killed",
      "category": "monsters"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Start in Norfair",
      "category": "start_location"
    },
    {
      "desc": "Start in Kraid's Lair",
      "category": "start_location"
    },
    {
      "desc": "Start in Ridley's Lair",
      "category": "start_location"
    },
    {
      "desc": "Reset",
      "category": "game_data"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Samus in Swimsuit",
      "category": "upgrade"
    },
    {
      "desc": "Samus Has Bombs",
      "category": "upgrade"
    },
    {
      "desc": "Samus Has High Jump Boots",
      "category": "upgrade"
    },
    {
      "desc": "Samus Has Long Beam",
      "category": "upgrade"
    },
    {
      "desc": "Samus Has Screw Attack",
      "category": "upgrade"
    },
    {
      "desc": "Samus Has Maru Mari",
      "category": "upgrade"
    },
    {
      "desc": "Samus Has Varia",
      "category": "upgrade"
    },
    {
      "desc": "Samus Has Wave Beam",
      "category": "upgrade"
    },
    {
      "desc": "Samus Has Ice Beam",
      "category": "upgrade"
    },
    {
      "desc": "Missile Count (+1 Missile)",
      "category": "game_data"
    },
    {
      "desc": "Missile Count (+2 Missiles)",
      "category": "game_data"
    },
    {
      "desc": "Missile Count (+4 Missiles)",
      "category": "game_data"
    },
    {
      "desc": "Missile Count (+8 Missiles)",
      "category": "game_data"
    },
    {
      "desc": "Missile Count (+16 Missiles)",
      "category": "game_data"
    },
    {
      "desc": "Missile Count (+32 Missiles)",
      "category": "game_data"
    },
    {
      "desc": "Missile Count (+64 Missiles)",
      "category": "game_data"
    },
    {
      "desc": "Missile Count (+128 Missiles)",
      "category": "game_data"
    },
    {
      "desc": "Game Age (32-bit Value -- Low Bit)",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age",
      "category": "game_data"
    },
    {
      "desc": "Game Age (32-bit Value -- High Bit)",
      "category": "game_data"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Unknown",
      "category": "unknown"
    },
    {
      "desc": "Ridley Killed",
      "category": "monsters"
    },
    {
      "desc": "Ridley Statue Raised",
      "category": "statue"
    },
    {
      "desc": "Kraid Killed",
      "category": "monsters"
    },
    {
      "desc": "Kraid Statue Raised",
      "category": "statue"
    }
  ]
}

},{}],2:[function(require,module,exports){
window.MetroidPasswords = require('./index.js');

},{"./index.js":3}],3:[function(require,module,exports){
'use strict';

// The Metroid alphabet
var ALPHABET = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz?- ';

/**
 * Converts a number to a binary string and pads it to 8 bits with leading
 * zeroes if necessary.
 *
 * @param {Number} byte  The byte value
 *
 * @return {String} byte converted to a binary string and padded
 */
var byteToBinaryString = function(byte) {
  var bin = byte.toString(2);

  return '00000000'.substring(bin.length) + bin;
};

/**
 * Encode a password into the Metroid alphabet.
 *
 * @param {Uint8ClampedArray}  The password to encode.  Only the first 16 bytes
 *                             are considered - 17th byte is not-yet-implemented
 *                             encryption shift byte, 18th is the checksum which
 *                             will be calculated.
 *
 * @return {String} the encoded password, which can be used in Metroid
 */
module.exports.encode = function(input) {
  var password;

  // 144 bits = 8 * 18 bytes
  var bytes = new Uint8ClampedArray(18);

  // Checksum byte - last byte
  bytes[17] = this.calculateChecksum(input);

  // Shift byte - how many times to rotate the password
  bytes[16] = 0;

  // Copy input data
  [].slice.call(input, 0, 16).forEach(function(byte, i) {
    bytes[i] = byte;
  });

  // @todo rotate according shift byte here

  // Convert to 6-bit blocks
  var sixBitBlocks = [];
  var binaryString = [].join.call(
    [].map.call(bytes, byteToBinaryString),
    ''
  );

  while (binaryString.length > 0) {
    sixBitBlocks.push(binaryString.substring(0, 6));

    binaryString = binaryString.substring(6);
  }

  password = sixBitBlocks.reduce(function(pass, block) {
    return pass + ALPHABET[parseInt(block, 2)];
  }, '');

  return password;
};

/**
 * Calculate the checksum for a password.
 *
 * The checksum is the sum of the first 136 bits, AND'd with 255.
 *
 * @param {Uint8ClampedArray} password  The 18-byte password
 *
 * @return {Number} the checksum value
 */
module.exports.calculateChecksum = function(password) {
  password = [].slice.call(password, 0, 16);

  var sum = password.reduce(function(total, byte) {
      return total + byte;
    }, 0);

  return sum & 255;
};

/**
 * Export the JSON structure used to describe the password bits.
 */
module.exports._data = require('../data/format.json');

},{"../data/format.json":1}]},{},[2,3]);
